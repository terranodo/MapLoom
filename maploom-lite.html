
{% load staticfiles i18n avatar_tags maploom_tags %}


<!DOCTYPE html>
<html ng-app="MapLoom" ng-controller="AppCtrl">
<head>
  <title ng-bind="pageTitle"></title>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-COMPATIBLE" content="IE-Edge">

  <!-- compiled CSS -->
  
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}maploom/assets/MapLoom-1.2.0.css"/>
  

  

  <!-- compiled JavaScript -->
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/jquery/jquery.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/jquery-sortable/source/js/jquery-sortable-min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular/angular.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular-ui-router/release/angular-ui-router.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/bootstrap/dist/js/bootstrap.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/bootstrap-filestyl/src/bootstrap-filestyle.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/moment/min/moment.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/bootstrap3-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/bootstrap3-datetimepicker/src/js/locales/bootstrap-datetimepicker.es.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/x2js/xml2json.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular-translate/angular-translate.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular-cookies/angular-cookies.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/ol3/ol-debug.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/d3/d3.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/proj4/dist/proj4-src.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/mgrs/dist/mgrs.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/blueimp-gallery/js/jquery.blueimp-gallery.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/blueimp-bootstrap-image-gallery/js/bootstrap-image-gallery.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/bootstrap-sortable/Scripts/bootstrap-sortable.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/vendor/angular-xeditable/dist/js/xeditable.min.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/DiffPanelController.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/HistoryPanelController.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/LoomModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/NotificaationPanelController.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/Proj4Defs.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/PulldownController.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/app.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/locales/en.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/app/locales/es.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/AddLayersDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/AddLayersDirectiveSpec.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/AddLayersModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/AddServerDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/LayerInfoPopoverDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/ServerService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/addlayers/ServerServiceSpec.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/arrangeable/ArrangeableDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/arrangeable/ArrangeableModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/configuration/ConfigModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/configuration/ConfigService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/DiffCommon.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/DiffListDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/DiffModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/DiffPanelDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/DiffService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/FeatureBlameService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/FeatureDiffController.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/FeatureDiffDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/FeatureDiffService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/FeaturePanelDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/diff/PanelSeparatorDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/AttributeEditDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/DrawSelectDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/ExclusiveModeDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/ExclusiveModeService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/FeatureInfoBoxDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/FeatureManagerModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/featuremanager/FeatureManagerService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/geogig/GeoGigModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/geogig/GeoGigPrototypes.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/geogig/GeoGigService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/history/HistoryDiffDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/history/HistoryModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/history/HistoryPanelDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/history/HistoryPopoverDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/history/HistoryService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/layers/LayerInfoDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/layers/LayersDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/layers/LayersModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/legend/LegendDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/legend/LegendModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/map/MapDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/map/MapDirectiveSpec.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/map/MapModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/map/MapSaveDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/map/MapService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/merge/ConflictService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/merge/MergeDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/merge/MergeModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/modal/DialogDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/modal/DialogService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/modal/ModalDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/modal/ModalModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/modal/PasswordDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notificationposter/NotificationPosterDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notificationposter/NotificationPosterModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notifications/GenerateNotificationDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notifications/NotificationBadgeDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notifications/NotificationsDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notifications/NotificationsModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/notifications/NotificationsService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/pulldown/PulldownModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/pulldown/PulldownService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/refresh/RefreshModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/refresh/RefreshService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/search/SearchDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/search/SearchModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/search/SearchService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/statistics/StatisticsDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/statistics/StatisticsModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/statistics/StatisticsService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/AddSynchronizationLinkDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/RemoteService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/SyncModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/SynchronizationConfigurationDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/SynchronizationLinksDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/SynchronizationPrototypes.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/sync/SynchronizationService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/tableview/FilterOptionsDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/tableview/TableViewDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/tableview/TableViewModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/tableview/TableViewService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/test/TestModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/test/TestService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/timeline/TimelineDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/timeline/TimelineModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/timeline/TimelineService.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/updatenotification/UpdateNotificationDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/updatenotification/UpdateNotificationModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/utils/Globals.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/utils/LoadingDirective.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/utils/UtilsModule.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/src/common/utils/wktparser.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/templates-common.js"></script>
  
  
  
  <script type="text/javascript" src="{{STATIC_URL}}maploom/templates-app.js"></script>
  
  

  
  {% get_current_language as language%}
  <script type="text/javascript">
    config = {
      authStatus: { % if user.is_authenticated %}
    200
    {% else %
    }
    401
    {%
      endif %
    }
    ,
    username: {%
      if user.is_authenticated %}
      "{{ user.username }}"
      {% else %
      }
      undefined
      {%
        endif %
      }
    ,
      userprofilename: {%
        if user.is_authenticated %}
        "{{ user.get_full_name }}"
        {% else %
        }
        undefined
        {%
          endif %
        }
      ,
        userprofileemail: {%
          if user.is_authenticated %}
          "{{ user.email }}"
          {% else %
          }
          undefined
          {%
            endif %
          }
        ,
          currentLanguage: "{{language|default:'en'}}",
              proxy
        :
          "/proxy/?url=",
              nominatimUrl
        :
          "http://nominatim.openstreetmap.org",
              printService
        :
          "{{GEOSERVER_BASE_URL}}pdf/",
            /* The URL to a REST map configuration service.  This service
             * provides listing and, with an authenticated user, saving of
             * maps on the server for sharing and editing.
             */
              rest
        :
          "{% url "
          maps_browse
          " %}",
              ajaxLoginUrl
        :
          "{% url "
          account_ajax_login
          " %}",
              homeUrl
        :
          "{% url "
          home
          " %}",
              portalItems
        :
          [
            {
              xtype: "container",
              layout: "fit",
            { %
          if classification_banner_enabled %}
          height: 99,
              { %
        else %
        }
        height: 81,
            { % endif %
      }
      region: "north"
    }
    ],
    localGeoServerBaseUrl: "{{ GEOSERVER_BASE_URL }}",
        localCSWBaseUrl
    :
    "{{ CATALOGUE_BASE_URL }}",
        csrfToken
    :
    "{{ csrf_token }}",
        tools
    :
    [
      {ptype: "gxp_getfeedfeatureinfo"}
    ],
    }
    ;

    goog.object.extend(config, {
    {
      config | safe
    }
    })
    ;

    console.log('############ config: ', config);
  </script>
  

</head>
<body>

{% verbatim %}

<div id="map" class="map">
  <div class="map-shadow"></div>
  <div class="loom-timeline"></div>
</div>

{% endverbatim %}

</body>
</html>
